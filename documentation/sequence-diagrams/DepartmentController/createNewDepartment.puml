@startuml

actor "Frontend" as front

box "Backend" #Lightgreen
control "DepartmentController" as controller
participant "DepartmentService" as service
database "Database" as db
end box

'autonumber

front -> controller++: POST /api/department/
controller -> controller: Check user role
alt "User has ADMIN role"
    controller -> controller: Validate request
    alt "Request is valid"
        controller -> service++: createDepartment()
        service -> db++: saveDepartment()
        db -> db: Check unique name constraint
        alt "Name is unique"
            db --> service: Saved entity
            service --> controller: Saved Department
            controller --> front: 201: Created Department
        else "Name isn't unique"
            db --> service--: error: unique constraint violation
            service --> controller--: Exception
            controller --> front: 422: Department with the \n specified name  already exists
        end
    else "Request is invalid"
        controller --> front: 400: Bad request
    end
else "User doesn't have ADMIN role""
    controller --> front--: 403: "Access denied"
end

@enduml